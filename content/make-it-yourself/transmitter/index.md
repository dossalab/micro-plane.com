+++
title = "Передатчик"
weight = 8
template = 'page-make-it-yourself.html'
+++

Каким бы завершенным не казался микросамолет, оживить его может только дистанционное управление. У вас же, в свою очередь, в руках окажется штурвал.
Думаю, будет лишним описывать те приятные ощущения, которые возникают у пилота.
И это не компьютерная игра, а реальный полет реального микросамолета…
Итак, давайте же разберемся, как самому можно построить электронику для всего этого.
В данной статье рассмотрим передатчик, с него я бы и рекомендовал начинать .
Сердцем передатчика является микроконтроллер PIC12F629, он занимается созданием, кодировкой, а также модуляцией полезного сигнала.
Но как же происходит формирование сигнала и его кодировка? Давайте разберемся.
В нашей конструкции используется многоканальная передача информации, в ней все каналы уплотняются в один посредством кодирования. Для этого используется широтно-импульсная модуляция, обозначаемая буквами РРМ (Pulse Phase Modulation)

{{ image(src="4.png") }}

РРМ сигнал имеет фиксированную длину периода Т=20мс. Это означает, что информация о положениях ручек управления на передатчике попадает на модель 50 раз в секунду, что определяет быстродействие аппаратуры управления. Как правило, этого хватает, поскольку скорость реакции пилота на поведение модели намного меньше. Все каналы пронумерованы и передаются по порядку номеров. Значение сигнала в канале определяется величиною временного промежутка между первым и вторым импульсом - для первого канала, между вторым и третьим - для второго канала и т.д. Чем больше промежуток, тем шире импульсы в приемном устройстве для данного канала, и тем больший ток в нагрузке (актуаторе, моторе). Диапазон изменения величины временного промежутка при движении джойстика из одного крайнего положения в другое определен от 0,5 до 1,65мс. Значение 1 мс соответствует среднему (нейтральному) положению джойстика (ручки управления). Продолжительность межканального импульса составляет около 0,5 мс

{{ image(src="2.png") }}

Данная структура РРМ сигнала является стандартной для всех производителей RC-аппаратуры. Значения среднего положения ручки у разных производителей может немного отличаться.
Рассмотрим работу схемы.

{{ image(src="s.png") }}

Микроконтроллер PIC12F629 не содержит внутреннего аналого-цифрового преобразователя (АЦП), и у пытливого читателя мог возникнуть вопрос: а как же реализована работа аналогового джойстика для плавной регулировки оборотами двигателя и углом поворота руля направления? Все очень просто.
На выводах 2 и 3 микроконтроллера (МК) поочередно, периодически появляются импульсы лог. 1 , по переднему фронту которых через резисторы R7,R8,R9 начинают заряжаться конденсаторы С4,С5 , от величины сопротивлений резисторов (угла поворота джойстиков) зависит время за которое конденсатор зарядится до определенного значения, при котором, уровень на входах 6 и 7 МК может считаться лог. 1. Затем конденсаторы разряжаются , и так происходит все время пока на МК подано напряжение питания. От времени заряда этих конденсаторов и зависит длительность «пауз» межу «канальными» импульсами. Так реализовано преобразование аналогового уровня в цифровой сигнал, а так же его кодировка. С этим разобрались, осталась модуляция.
Чтобы поймать сформированный и закодированный сигнал в инфракрасном (IR) приемнике, недостаточно просто подключить к соответствующему выводу МК IR светодиод. Дело в том, что в интегральных IR приемниках для увеличения помехозащищенности, а так же, для повышения чувствительности реализован входной фильтр, полоса пропускания которого очень сужена, у разных приемников она разная. Следовательно, полезный сигнал еще не готов, его нужно промодулировать, что и делает МК. При лог.1 на входе 4 он выдает сигнал модулированный частотой 56,9 КГц, при лог.0 – 38 КГц

{{ image(src="3.png") }}

С работой кодера разобрались, переходим к схеме питания.
Тут тоже ничего сложного, на микросхеме U2 реализован повышающий DC-DC конвертер, необходимый для поддержания напряжения питания МК на постоянном уровне 5 вольт, не смотря на постепенный разряд питающей литиевой батареи. А во избежание глубокого разряда батареи в схеме имеется индикатор разряда на микросхеме U1, зажигающий светодиод при снижении напряжения питания до уровня 3,5 вольт.
О материалах:
Микросхемы МС34063 и PIC12F629 очень распространены, их можно приобрести на радиорынке.

KIA7035 можно выпаять из платы неисправного DVD плеера, микросхема стоит в цепи сброса процессора. Если вы используете литиевую батарею от мобильного телефона, то микросхему U1 можно и не впаивать, т.к. такая батарея содержит контроллер, предохраняющий от глубокого разряда. Но в этом случае существует опасность разбить самолет, если контроллер внезапно отключит батарею и вы потеряете управление.
В качестве R9 используется стандартный двухканальный резистор из аналогового джойстика приставки PSP. Только придется его немного доработать напильником , чтобы верхнее окно было не круглым, а квадратным, что позволит производить более широкие манипуляции вправо-влево, вверх-вниз. Также придется его разобрать, чтоб сточить пластиковый упор, это позволит фиксировать «гашетку» на нуле и на максимуме. Все доработки видны на фото ниже.

{{ image(src="2.jpg") }}

{{ image(src="3.jpg") }}

{{ image(src="4.jpg") }}

{{ image(src="5.jpg") }}

{{ image(src="6.jpg") }}

Конденсаторы С4,С5 лучше использовать пленочные. Диод D1 - любой импульсный, на ток не менее 200ма. В качестве Т1 можно применить любой биполярный транзистор средней мощности NPN структуры, или даже полевой N-канальный. Дроссель L1 – любой, индуктивностью 100-200 мГ, на ток не менее 200 ма.
Правильно собранная схема начинает работать сразу и в настройке почти не нуждается, При желании можно более точно выставить напряжение преобразователя с помощью резистора R1
Движки построечных резисторов R7,R8 следует выставить в среднее положение, более точное их положение можно найти используя готовый приемник.
Микроконтроллер программируется без каких либо особенностей, нужно только правильно выбрать его тип в управляющей программатором программе, все галочки уже выставлены в прошивке, и не забыть считать калибровочную сумму из микроконтроллера (последний байт), чтоб потом добавить его к прошивке. Об этом подробнее в разделе «программатор».
Собранный передатчик имеет вид как на фото.

{{ image(src="1.jpg") }}

ПЕЧАТКА+ПРОШИВКА+СХЕМА
